<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>Modified JDT Core for AspectJ</title>
  </head>

  <body>
    <h2>Modified JDT Core for AspectJ</h2>

    <p>There are four kinds of changes made to the jdt.core sources.</p>
    
    <ol>
      <li>Things that are completely broken from an extensibility point of view.
	Serious design work is needed on these before we'd even want to propose changes to 
	the jdt.core main branch.
	<pre>
Auto-generated constants
org.eclipse.jdt.internal.compiler.parser.TerminalTokens
org.eclipse.jdt.internal.compiler.parser.ParserBasicInformation

Static dependencies might be solved for all but above
org.eclipse.jdt.internal.compiler.parser.Parser
org.eclipse.jdt.internal.compiler.parser.Scanner
	</pre>
      </li>
      <li>Visibility, finalness of methods/fields changed for extensibility.</li>
      <li>Additional extension hooks added to several classes.  Need to ensure there is no major performance hit, and that these designs are fairly clean.</li>
      <li>Whole question of what is the API of the compiler.  Currently, many internal classes are used and extended.  It would sure be nice to solve the practical problems in 1-3 before addressing this important question.</li>
    </ol>
    
    <h2>Notes on packaging</h2>
    
    <p>To prevent clashes with the org.eclipse namespace, we add the 'org.aspectj' prefix
    to all package names in the 'org.eclipse.jdt' namespace.  There are two helper targets
    in the ANT script to achieve this:
    <ul>
    <li>transformProjectToORGASPECTJ - This target will add the prefix to all the relevant 
    packages in the source folders.  It changes the filenames and their internal references.
    <li>transformProjectFromORGASPECTJ - This target removes the prefix from all the
    relevant packages in the source folders.  It changes the filenames and their internal
    references.
    </ul>
    <p>So, when you want to build a new version of the org.eclipse.jdt.core plugins, you should
    ensure your source folders have the package prefix before you call the make.jdtcore.jar
    target.
    <p>In the shadows project in CVS we keep the *non* prefixed versions to make merging easier.
  </body>
</html>
